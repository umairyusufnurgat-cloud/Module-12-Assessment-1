<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Lively Contact Book</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  :root {
    --primary: #4a90e2;
    --dark-bg: #1c1c1c;
    --light-bg: #f0f2f5;
    --card-radius: 12px;
    --transition: 0.3s;
  }

  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: var(--light-bg);
    color: #333;
    transition: background 0.3s, color 0.3s;
  }

  body.dark {
    background: var(--dark-bg);
    color: #f0f2f5;
  }

  header {
    text-align: center;
    padding: 1.5rem;
    background: var(--primary);
    color: #fff;
    font-size: 1.7rem;
    font-weight: bold;
    letter-spacing: 2px;
  }

  .container {
    max-width: 1000px;
    margin: 20px auto;
    padding: 20px;
  }

  /* Form */
  form {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 15px;
    align-items: center;
  }

  form input, form select {
    flex: 1 1 25%;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid #ccc;
  }

  form button {
    padding: 10px 20px;
    background: var(--primary);
    color: #fff;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background 0.3s;
  }

  form button:hover { background: #357abd; }

  /* Top controls */
  .top-controls {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 15px;
    align-items: center;
  }

  .top-controls input, .top-controls select, .top-controls button {
    padding: 8px;
    border-radius: 8px;
    border: 1px solid #ccc;
  }

  .top-controls button { cursor: pointer; background: var(--primary); color: #fff; border:none; transition: background 0.3s; }
  .top-controls button:hover { background: #357abd; }

  /* Contact cards */
  .cards {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 15px;
  }

  .card {
    background: #fff;
    border-radius: var(--card-radius);
    padding: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    position: relative;
    transition: transform var(--transition), box-shadow var(--transition);
  }

  body.dark .card { background: #2a2a2a; box-shadow: 0 5px 15px rgba(0,0,0,0.4); }

  .card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0,0,0,0.2);
  }

  .avatar {
    width: 50px;
    height: 50px;
    background: var(--primary);
    border-radius: 50%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    font-weight: bold;
    font-size: 1.2rem;
    margin-right: 10px;
  }

  .card-header {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
  }

  .card h3 {
    margin: 0;
    font-size: 1.1rem;
    flex: 1;
  }

  .favorite {
    font-size: 1.3rem;
    cursor: pointer;
    color: gold;
    transition: transform 0.2s;
  }

  .favorite.not { color: #ccc; }

  .favorite:hover { transform: scale(1.2); }

  .category {
    display: inline-block;
    padding: 3px 8px;
    border-radius: 8px;
    color: #fff;
    font-size: 0.8rem;
    margin-bottom: 5px;
  }

  .category-Friends { background: #a0d911; }
  .category-Work { background: #1890ff; }
  .category-Family { background: #eb2f96; }
  .category-Other { background: #faad14; }

  .card p { margin: 3px 0; font-size: 0.9rem; }
  .card .actions {
    margin-top: 8px;
    display: flex;
    gap: 5px;
  }

  .card .actions button {
    flex: 1;
    padding: 5px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    color: #fff;
  }

  .edit { background: #f0ad4e; }
  .delete { background: #d9534f; }

  /* Drag cursor */
  .dragging { opacity: 0.6; }
</style>
</head>
<body>

<header>üìá Lively Contact Book</header>

<div class="container">

  <!-- Add Contact Form -->
  <form id="contactForm">
    <input type="text" id="name" placeholder="Full Name" required>
    <input type="text" id="phone" placeholder="Phone Number" required>
    <input type="email" id="email" placeholder="Email Address">
    <select id="category">
      <option value="Friends">Friends</option>
      <option value="Work">Work</option>
      <option value="Family">Family</option>
      <option value="Other">Other</option>
    </select>
    <button type="submit">Add Contact</button>
  </form>

  <!-- Search, filter, sort, dark mode -->
  <div class="top-controls">
    <input type="text" id="search" placeholder="Search...">
    <select id="filterCategory">
      <option value="">All Categories</option>
      <option value="Friends">Friends</option>
      <option value="Work">Work</option>
      <option value="Family">Family</option>
      <option value="Other">Other</option>
    </select>
    <select id="sort">
      <option value="name">Sort by Name</option>
      <option value="category">Sort by Category</option>
    </select>
    <button id="toggleDark">Toggle Dark Mode</button>
  </div>

  <!-- Contact cards -->
  <div class="cards" id="cardsContainer"></div>
</div>

<script>
let contacts = JSON.parse(localStorage.getItem('contacts')) || [];
const contactForm = document.getElementById('contactForm');
const cardsContainer = document.getElementById('cardsContainer');
const searchInput = document.getElementById('search');
const filterCategory = document.getElementById('filterCategory');
const sortSelect = document.getElementById('sort');
const toggleDark = document.getElementById('toggleDark');

function saveContacts(){ localStorage.setItem('contacts', JSON.stringify(contacts)); }

function renderContacts() {
  let filtered = contacts.filter(c => {
    const q = searchInput.value.toLowerCase();
    return c.name.toLowerCase().includes(q) || c.phone.includes(q) || (c.email && c.email.toLowerCase().includes(q));
  });

  if(filterCategory.value) filtered = filtered.filter(c => c.category===filterCategory.value);

  const sortBy = sortSelect.value;
  filtered.sort((a,b)=> a[sortBy].localeCompare(b[sortBy]));

  cardsContainer.innerHTML='';
  filtered.forEach((c,index)=>{
    const card = document.createElement('div');
    card.className='card';
    card.draggable=true;
    card.innerHTML=`
      <div class="card-header">
        <div class="avatar">${c.name.charAt(0).toUpperCase()}</div>
        <h3>${c.name}</h3>
        <span class="favorite ${c.favorite?'':'not'}" onclick="toggleFavorite(${index})">${c.favorite?'‚òÖ':'‚òÜ'}</span>
      </div>
      <span class="category category-${c.category}">${c.category}</span>
      <p>üìû ${c.phone}</p>
      <p>‚úâÔ∏è ${c.email||''}</p>
      <div class="actions">
        <button class="edit" onclick="editContact(${index})">Edit</button>
        <button class="delete" onclick="deleteContact(${index})">Delete</button>
      </div>
    `;
    cardsContainer.appendChild(card);

    // Drag and drop events
    card.addEventListener('dragstart',()=>{ card.classList.add('dragging'); });
    card.addEventListener('dragend',()=>{ card.classList.remove('dragging'); });
  });
}

// Event listeners
contactForm.addEventListener('submit', e=>{
  e.preventDefault();
  const name=document.getElementById('name').value.trim();
  const phone=document.getElementById('phone').value.trim();
  const email=document.getElementById('email').value.trim();
  const category=document.getElementById('category').value;

  if(contactForm.dataset.editIndex!=undefined){
    contacts[contactForm.dataset.editIndex]={name,phone,email,category,favorite:contacts[contactForm.dataset.editIndex].favorite};
    delete contactForm.dataset.editIndex;
  } else contacts.push({name,phone,email,category,favorite:false});

  saveContacts(); contactForm.reset(); renderContacts();
});

function editContact(i){
  const c=contacts[i];
  document.getElementById('name').value=c.name;
  document.getElementById('phone').value=c.phone;
  document.getElementById('email').value=c.email;
  document.getElementById('category').value=c.category;
  contactForm.dataset.editIndex=i;
}

function deleteContact(i){ if(confirm('Delete this contact?')){ contacts.splice(i,1); saveContacts(); renderContacts(); } }
function toggleFavorite(i){ contacts[i].favorite=!contacts[i].favorite; saveContacts(); renderContacts(); }

searchInput.addEventListener('input',renderContacts);
filterCategory.addEventListener('change',renderContacts);
sortSelect.addEventListener('change',renderContacts);
toggleDark.addEventListener('click',()=>{ document.body.classList.toggle('dark'); });

renderContacts();
</script>

</body>
</html>
